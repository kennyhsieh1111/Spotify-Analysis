hideDelay=100,useHTML=T,padding=5,
pointFormat="<center><b>{point.tracks}</b><center>{point.artist}<br>{point.album}<br><br>
<img src='point.image_url', height = '75'>")
hchart(songs_show, "scatter", hcaes(x = energy, y = acousticness, group = cluster, tracks, artist, album, image_url)) %>%
hc_add_theme(hc_theme_smpl()) %>%
hc_title(text = "Kenny's Spotify Distribution") %>%
hc_colors(hex_to_rgba(c('#03BB4F','#4285D9'), alpha = 0.70)) %>%
hc_legend(floating=T,align='left',verticalAlign='bottom') %>%
hc_tooltip(headerFormat = "",valueDecimals=2,borderWidth=2,
hideDelay=100,useHTML=T,padding=5,
pointFormat="<center><b>{point.tracks}</b><center>{point.artist}<br>{point.album}<br><br>
<img src='{point.image_url}', height = '75'>")
songs_show <- left_join(songs, tracks, by = "id", copy = F)
songs_show$cluster <- songs_analysis$cluster
hchart(songs_show, "scatter", hcaes(x = energy, y = acousticness, group = cluster, tracks, artist, album, image_url)) %>%
hc_add_theme(hc_theme_smpl()) %>%
hc_title(text = "Kenny's Spotify Distribution") %>%
hc_colors(hex_to_rgba(c('#03BB4F','#4285D9'), alpha = 0.70)) %>%
hc_legend(floating=T,align='left',verticalAlign='bottom') %>%
hc_tooltip(headerFormat = "",valueDecimals=2,borderWidth=2,
hideDelay=100,useHTML=T,padding=5,
pointFormat="<center><b>{point.tracks}</b><center>{point.artist}<br>{point.album}<br><br>
<img src='{point.image_url}', height = '75'>")
hchart(songs_show, "scatter", hcaes(x = energy, y = acousticness, group = cluster, tracks, artist, album, image_url)) %>%
hc_add_theme(hc_theme_smpl()) %>%
hc_title(text = "Kenny's Spotify Distribution") %>%
hc_colors(hex_to_rgba(c('#03BB4F','#4285D9'), alpha = 0.70)) %>%
hc_legend(floating=T,align='left',verticalAlign='bottom') %>%
hc_tooltip(headerFormat = "",valueDecimals=2,borderWidth=2,
hideDelay=100,useHTML=T,padding=7,
pointFormat="<center><b>{point.tracks}</b><center>{point.artist}<br>{point.album}<br><br>
<img src='{point.image_url}', height = '75'>")
save.image("SpotifyJun15_v2.Rdata")
hchart(songs_show, "scatter", hcaes(x = energy, y = acousticness, group = cluster, tracks, artist, album, image_url, listen_url)) %>%
hc_add_theme(hc_theme_smpl()) %>%
hc_title(text = "Kenny's Spotify Distribution") %>%
hc_colors(hex_to_rgba(c('#03BB4F','#4285D9'), alpha = 0.70)) %>%
hc_legend(floating=T,align='left',verticalAlign='bottom') %>%
hc_tooltip(headerFormat = "",valueDecimals=2,borderWidth=2,
hideDelay=100,useHTML=T,padding=7,
pointFormat="<center><b>{point.tracks}</b><center>{point.artist}<br>{point.album}<br><br>
<img src='{point.image_url}', height = '75'><a href = {point.listen_url}>H</a>")
hchart(songs_show, "scatter", hcaes(x = energy, y = acousticness, group = cluster, tracks, artist, album, image_url, listen_url)) %>%
hc_add_theme(hc_theme_smpl()) %>%
hc_title(text = "Kenny's Spotify Distribution") %>%
hc_colors(hex_to_rgba(c('#03BB4F','#4285D9'), alpha = 0.70)) %>%
hc_legend(floating=T,align='left',verticalAlign='bottom') %>%
hc_tooltip(headerFormat = "",valueDecimals=2,borderWidth=2,
hideDelay=100,useHTML=T,padding=7,
pointFormat="<center><b>{point.tracks}</b><center>{point.artist}<br>{point.album}<br><br>
<img src='{point.image_url}', height = '75'><a href = '{point.listen_url'}>H</a>")
hchart(songs_show, "scatter", hcaes(x = energy, y = acousticness, group = cluster, tracks, artist, album, image_url, listen_url)) %>%
hc_add_theme(hc_theme_smpl()) %>%
hc_title(text = "Kenny's Spotify Distribution") %>%
hc_colors(hex_to_rgba(c('#03BB4F','#4285D9'), alpha = 0.70)) %>%
hc_legend(floating=T,align='left',verticalAlign='bottom') %>%
hc_tooltip(headerFormat = "",valueDecimals=2,borderWidth=2,
hideDelay=100,useHTML=T,padding=7,
pointFormat="<center><b>{point.tracks}</b><center>{point.artist}<br>{point.album}<br><br>
<img src='{point.image_url}', height = '75'><a href = '{point.listen_url}'>H</a>")
hchart(songs_show, "scatter", hcaes(x = energy, y = acousticness, group = cluster, tracks, artist, album, image_url, listen_url)) %>%
hc_add_theme(hc_theme_smpl()) %>%
hc_title(text = "Kenny's Spotify Distribution") %>%
hc_colors(hex_to_rgba(c('#03BB4F','#4285D9'), alpha = 0.70)) %>%
hc_legend(floating=T,align='left',verticalAlign='bottom') %>%
hc_tooltip(headerFormat = "",valueDecimals=2,borderWidth=2,
hideDelay=100,useHTML=T,padding=7,
pointFormat="<center><b>{point.tracks}</b><center>{point.artist}<br>{point.album}<br><br>
<img src='{point.image_url}', height = '75'>{point.listen_url}")
hchart(songs_show, "scatter", hcaes(x = energy, y = acousticness, group = cluster, tracks, artist, album, image_url)) %>%
hc_add_theme(hc_theme_smpl()) %>%
hc_title(text = "Kenny's Spotify Distribution") %>%
hc_colors(hex_to_rgba(c('#03BB4F','#4285D9'), alpha = 0.70)) %>%
hc_legend(floating=T,align='left',verticalAlign='bottom') %>%
hc_tooltip(headerFormat = "",valueDecimals=2,borderWidth=2,
hideDelay=100,useHTML=T,padding=7,
pointFormat="<center><b>{point.tracks}</b><center>{point.artist}<br>{point.album}<br><br>
<img src='{point.image_url}', height = '75'>")
hchart(songs_show, "scatter", hcaes(x = energy, y = acousticness, group = cluster, tracks, artist, album, image_url)) %>%
hc_add_theme(hc_theme_smpl()) %>%
hc_title(text = "Kenny's Spotify Distribution") %>%
hc_colors(hex_to_rgba(c('#03BB4F','#4285D9'), alpha = 0.70)) %>%
hc_legend(floating=T,align='left',verticalAlign='bottom') %>%
hc_tooltip(headerFormat = "",valueDecimals=2,borderWidth=2,
hideDelay=100,useHTML=T,padding=7,
pointFormat="<center><b>{point.tracks}</b><center>{point.artist}<br>{point.album}<br><br>
<img src='{point.image_url}', height = '100'>")
hchart(songs_show, "scatter", hcaes(x = energy, y = acousticness, group = cluster, tracks, artist, album, image_url)) %>%
hc_add_theme(hc_theme_smpl()) %>%
hc_title(text = "Kenny's Spotify Distribution") %>%
hc_colors(hex_to_rgba(c('#03BB4F','#4285D9'), alpha = 0.70)) %>%
hc_legend(floating=T,align='left',verticalAlign='bottom') %>%
hc_tooltip(headerFormat = "",valueDecimals=2,borderWidth=2,
hideDelay=100,useHTML=T,padding=7,
pointFormat="<img src='{point.image_url}', height = '100'>
<center><b>{point.tracks}</b><center>{point.artist}<br>{point.album}<br><br>")
hchart(songs_show, "scatter", hcaes(x = energy, y = acousticness, group = cluster, tracks, artist, album, image_url)) %>%
hc_add_theme(hc_theme_smpl()) %>%
hc_title(text = "Kenny's Spotify Distribution") %>%
hc_colors(hex_to_rgba(c('#03BB4F','#4285D9'), alpha = 0.70)) %>%
hc_legend(floating=T,align='left',verticalAlign='bottom') %>%
hc_tooltip(headerFormat = "",valueDecimals=2,borderWidth=2,
hideDelay=100,useHTML=T,padding=7,
pointFormat="<img src='{point.image_url}', height = '100'>
<center><b>{point.tracks}</b><center>{point.artist}<br>{point.album}")
hchart(songs_show, "scatter", hcaes(x = energy, y = acousticness, group = cluster, tracks, artist, album, image_url)) %>%
hc_add_theme(hc_theme_smpl()) %>%
hc_title(text = "Kenny's Spotify Distribution") %>%
hc_colors(hex_to_rgba(c('#03BB4F','#4285D9'), alpha = 0.70)) %>%
hc_legend(floating=T,align='left',verticalAlign='bottom') %>%
hc_tooltip(headerFormat = "",valueDecimals=2,borderWidth=2,
hideDelay=100,useHTML=T,padding=7,
pointFormat="<img src='{point.image_url}', height = '100'>
<center>{point.tracks}<center>{point.artist}<br>{point.album}")
hchart(songs_show, "scatter", hcaes(x = energy, y = acousticness, group = cluster, tracks, artist, album, image_url)) %>%
hc_add_theme(hc_theme_smpl()) %>%
hc_title(text = "Kenny's Spotify Distribution") %>%
hc_colors(hex_to_rgba(c('#03BB4F','#4285D9'), alpha = 0.70)) %>%
hc_legend(floating=T,align='left',verticalAlign='bottom') %>%
hc_tooltip(headerFormat = "",valueDecimals=2,borderWidth=2,
hideDelay=100,useHTML=T,padding=7,margin=10,
pointFormat="<img src='{point.image_url}', height = '100'>
<center>{point.tracks}<center>{point.artist}<br>{point.album}")
hchart(songs_show, "scatter", hcaes(x = energy, y = acousticness, group = cluster, tracks, artist, album, image_url)) %>%
hc_add_theme(hc_theme_smpl()) %>%
hc_title(text = "Kenny's Spotify Distribution") %>%
hc_colors(hex_to_rgba(c('#03BB4F','#4285D9'), alpha = 0.70)) %>%
hc_legend(floating=T,align='left',verticalAlign='bottom') %>%
hc_tooltip(headerFormat = "",valueDecimals=2,borderWidth=2,
hideDelay=100,useHTML=T,padding=7,margin=30,
pointFormat="<img src='{point.image_url}', height = '100'>
<center>{point.tracks}<center>{point.artist}<br>{point.album}")
hchart(songs_show, "scatter", hcaes(x = energy, y = acousticness, group = cluster, tracks, artist, album, image_url)) %>%
hc_add_theme(hc_theme_smpl()) %>%
hc_title(text = "Kenny's Spotify Distribution") %>%
hc_colors(hex_to_rgba(c('#03BB4F','#4285D9'), alpha = 0.70)) %>%
hc_legend(floating=T,align='left',verticalAlign='bottom') %>%
hc_tooltip(headerFormat = "",valueDecimals=2,borderWidth=2,
hideDelay=100,useHTML=T,padding=7,
pointFormat="<img src='{point.image_url}', height = '100'>
<center>{point.tracks}<center>{point.artist}<br>{point.album}")
rm(list = ls())
library('Rspotify')
getAllSongs <- function(user, playlist, token) {
idx <- 0
songs <- getPlaylistSongs(user, playlist, idx, token)
while(TRUE){
idx <- idx + 1
songs_tmp <- getPlaylistSongs(user, playlist, idx * 100, token)
songs <- rbind(songs, songs_tmp)
if(dim(songs_tmp)[1]  != 100 | dim(songs)[1] > 500){ break }
}
return(songs)
}
getTrack<-function(id, token){
req <- httr::GET(paste0("https://api.spotify.com/v1/tracks/",id), httr::config(token = token))
json <- httr::content(req)
artists <- json$artists[[1]]$name
album <- json$album$name
image_url <- json$album$images[[2]]$url
listen <- json$external_urls$spotify
print(c(id))
track <- data.frame(id = id,artists = artists, album = album, image_url = image_url, listen_url = listen, stringsAsFactors = F)
return(track)
}
getFeatures_own <- function(spotify_ID,token){
req <- httr::GET(paste0("https://api.spotify.com/v1/audio-features/",spotify_ID), httr::config(token = token))
json1<-data.frame(httr::content(req))
print(class(json1))
dados=data.frame(id=json1$id,
danceability=json1$danceability,
energy=json1$energy,
key=json1$key,
loudness=json1$loudness,
mode=json1$mode,
speechiness=json1$speechiness,
acousticness=json1$acousticness,
instrumentalness=json1$instrumentalness,
liveness=json1$liveness,
valence=json1$valence,
tempo=json1$tempo,
duration_ms=json1$duration_ms,
time_signature=json1$time_signature,
uri=json1$uri,
analysis_url=json1$analysis_url,stringsAsFactors = F)
return(dados)
}
keys <- spotifyOAuth("Spotify Data Analysis","6ea6156a265e413a93ae7c5272e6b155","6db9315501b34f5e9c951b32aab81dee")
keys
user <- getUser("1266145897", token = keys)
rm(list = ls())
rm(list = ls())
library('Rspotify')
getAllSongs <- function(user, playlist, token) {
idx <- 0
songs <- getPlaylistSongs(user, playlist, idx, token)
while(TRUE){
idx <- idx + 1
songs_tmp <- getPlaylistSongs(user, playlist, idx * 100, token)
songs <- rbind(songs, songs_tmp)
if(dim(songs_tmp)[1]  != 100 | dim(songs)[1] > 500){ break }
}
return(songs)
}
getTrack<-function(id, token){
req <- httr::GET(paste0("https://api.spotify.com/v1/tracks/",id), httr::config(token = token))
json <- httr::content(req)
artists <- json$artists[[1]]$name
album <- json$album$name
image_url <- json$album$images[[2]]$url
listen <- json$external_urls$spotify
print(c(id))
track <- data.frame(id = id,artists = artists, album = album, image_url = image_url, listen_url = listen, stringsAsFactors = F)
return(track)
}
getFeatures_own <- function(spotify_ID,token){
req <- httr::GET(paste0("https://api.spotify.com/v1/audio-features/",spotify_ID), httr::config(token = token))
json1<-data.frame(httr::content(req))
print(class(json1))
dados=data.frame(id=json1$id,
danceability=json1$danceability,
energy=json1$energy,
key=json1$key,
loudness=json1$loudness,
mode=json1$mode,
speechiness=json1$speechiness,
acousticness=json1$acousticness,
instrumentalness=json1$instrumentalness,
liveness=json1$liveness,
valence=json1$valence,
tempo=json1$tempo,
duration_ms=json1$duration_ms,
time_signature=json1$time_signature,
uri=json1$uri,
analysis_url=json1$analysis_url,stringsAsFactors = F)
return(dados)
}
keys <- spotifyOAuth("Spotify Data Analysis","6ea6156a265e413a93ae7c5272e6b155","6db9315501b34f5e9c951b32aab81dee")
user <- getUser("1266145897", token = keys)
playlist <- getPlaylist(user$id, token = keys)
playlist_id <- playlist[which(playlist$name == "Singles"), "id"]
songs <- getAllSongs(user$id, playlist_id, keys) # 耗時
feature <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures1(songs_pl_id[x], keys)
}, 1:length(songs_pl_id))))
songs_pl_id <- songs$id
feature <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures1(songs_pl_id[x], keys)
}, 1:length(songs_pl_id))))
feature <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures_own(songs_pl_id[x], keys)
}, 1:length(songs_pl_id))))
View(feature)
feature <- sapply(songs_pl_id, function(x) getFeatures1(x, keys))
library('Rspotify')
keys <- spotifyOAuth("Spotify Data Analysis","6ea6156a265e413a93ae7c5272e6b155","6db9315501b34f5e9c951b32aab81dee")
rm(list=ls())
keys <- spotifyOAuth("Spotify Data Analysis","6ea6156a265e413a93ae7c5272e6b155","6db9315501b34f5e9c951b32aab81dee")
keys
user <- getUser("1266145897", token = keys)
user
playlist <- getPlaylist(user$id, token = keys)
playlist
playlist_id <- playlist[which(playlist$name == "Singles"), "id"]
user <- getUser("1266145897", keys)
playlist <- getPlaylist(user$id, keys)
user
playlist <- getPlaylist(user$id, keys)
playlist <- getPlaylist(user$id, token = keys)
playlist_id <- playlist[which(playlist$name == "Singles"), "id"]
pl_songs <- getPlaylist(user$id, playlist_id, keys)
pl_songs <- getPlaylist(user$id, playlist_id, token = keys)
playlist_id <- playlist[which(playlist$name == "Singles_2"), "id"]
pl_songs <- getPlaylist(user$id, playlist_id, token = keys)
pl_songs <- getPlaylist(user$id, playlist_id, token = keys)
View(pl_songs)
pl_songs <- getPlaylist(user$id, playlist_id, token = keys)
user$id
pl_songs <- getPlaylist("spotify", "4hOKQuZbraPDIfaGbM3lKI",token=keys)
pl_songs <- getPlaylistSongs("spotify", "4hOKQuZbraPDIfaGbM3lKI",token=keys)
playlist_id <- playlist[which(playlist$name == "Singles"), "id"]
pl_songs <- getPlaylistSongs(user$id, playlist_id, token=keys)
View(pl_songs)
getPlaylistSongs()
getPlaylistSongs
source('Expansion.R')
source('Expansion.R', "r")
getwd()
setwd('~/Documents/Spotify')
source('Expansion.R')
songs <- getAllSongs(user$id, playlist_id, keys)
source('Expansion.R')
songs <- getAllSongs(user$id, playlist_id, keys)
songs <- getAllSongs(user$id, playlist_id, keys)
songs <- getAllSongs(user$id, playlist_id, keys)
source('Expansion.R')
songs <- getAllSongs(user$id, playlist_id, keys)
playlist_len <- playlist[which(playlist$name == "Singles"), "tracks"]
songs <- as.data.frame(do.call(rbind, Map(function(x){
getPlaylistSongs(user$id, playlist_id, offset=100*x+1, token=keys)
}, 0:(playlist_len/100))))
songs <- as.data.frame(do.call(rbind, Map(function(x){
getPlaylistSongs(user$id, playlist_id, offset=100*x+1, token=keys)
print(x)
}, 0:(playlist_len/100))))
songs <- as.data.frame(do.call(rbind, Map(function(x){
getPlaylistSongs(user$id, playlist_id, offset=100*x+1, token=keys)
}, 0:5)))
View(songs)
songs_part2 <- as.data.frame(do.call(rbind, Map(function(x){
getPlaylistSongs(user$id, playlist_id, offset=100*x+1, token=keys)
}, 5:10)))
songs_part2 <- as.data.frame(do.call(rbind, Map(function(x){
getPlaylistSongs(user$id, playlist_id, offset=100*x+1, token=keys)
}, 6:10)))
songs_part2 <- as.data.frame(do.call(rbind, Map(function(x){
getPlaylistSongs(user$id, playlist_id, offset=100*x+1, token=keys)
print(x)
}, 6:10)))
songs_part2 <- as.data.frame(do.call(rbind, Map(function(x){
getPlaylistSongs(user$id, playlist_id, offset=100*x+1, token=keys)
print(x)
}, 7:10)))
View(songs_part2)
songs_part2 <- as.data.frame(do.call(rbind, Map(function(x){
getPlaylistSongs(user$id, playlist_id, offset=100*x+1, token=keys)
print(x)
}, 7:10)))
songs_part1 <- as.data.frame(do.call(rbind, Map(function(x){
getPlaylistSongs(user$id, playlist_id, offset=100*x+1, token=keys)
}, 7:9)))
View(songs_part1)
songs_part2 <- as.data.frame(do.call(rbind, Map(function(x){
getPlaylistSongs(user$id, playlist_id, offset=100*x+1, token=keys)
}, 6:7)))
songs_part2 <- as.data.frame(do.call(rbind, Map(function(x){
getPlaylistSongs(user$id, playlist_id, offset=100*x+1, token=keys)
}, 6:8)))
songs_part2 <- as.data.frame(do.call(rbind, Map(function(x){
getPlaylistSongs(user$id, playlist_id, offset=100*x+1, token=keys)
}, 7:8)))
View(songs_part2)
songs_part2 <- as.data.frame(do.call(rbind, Map(function(x){
getPlaylistSongs(user$id, playlist_id, offset=100*x+1, token=keys)
}, 7:9)))
songs_part1 <- as.data.frame(do.call(rbind, Map(function(x){
getPlaylistSongs(user$id, playlist_id, offset=100*x+1, token=keys)
}, 0:5)))
songs_part2 <- as.data.frame(do.call(rbind, Map(function(x){
getPlaylistSongs(user$id, playlist_id, offset=100*x+1, token=keys)
}, 7:10)))
View(songs_part2)
songs <- rbind(songs_part1, songs_part2)
rm(songs_part1, songs_part2)
rm(songs_part1, songs_part2, pl_songs)
View(songs)
View(songs)
feature <- getFeatures(sogns$id[1], token=keys)
feature <- getFeatures(songs$id[1], token=keys)
View(feature)
features <- songs$id
View(feature)
print(features)
rm(feature)
features <- getFeatures(features, token=keys)
features_id <- songs$id
songs[0,0]
print(songs[, 0])
print(songs[0, 0])
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures(features_id[x], token=keys)
}, 1:length(features_id))))
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures(features_id[x], token=keys)
print(x)
}, 1:length(features_id))))
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures(features_id[x], token=keys)
print(x)
}, 1:300)))
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures(features_id[x], token=keys)
Sys.time(0.5)
}, 1:300)))
Sys.sleep(0.5)
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures(features_id[x], token=keys)
Sys.sleep(0.5)
}, 1:300)))
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures(features_id[x], token=keys)
print(x)
Sys.sleep(0.5)
}, 1:300)))
View(features)
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures(features_id[x], token=keys)
print(x)
Sys.sleep(0.5)
}, 1:2)))
features <- getFeatures(features_id[0], token=keys)
features <- getFeatures(features_id[1], token=keys)
View(features)
}
for(i in 1:2){
features <- getFeatures(features_id[i], token=keys)
}
View(features)
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures(features_id[x], token=keys)
print(x)
Sys.sleep(0.5)
}, 1:2)))
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures(features_id[x], token=keys)
print(x)
Sys.sleep(0.5)
}, 1:1)))
getFeatures_own <- function(spotify_ID,token){
req <- httr::GET(paste0("https://api.spotify.com/v1/audio-features/",spotify_ID), httr::config(token = token))
json1<-data.frame(httr::content(req))
print(class(json1))
dados=data.frame(id=json1$id,
danceability=json1$danceability,
energy=json1$energy,
key=json1$key,
loudness=json1$loudness,
mode=json1$mode,
speechiness=json1$speechiness,
acousticness=json1$acousticness,
instrumentalness=json1$instrumentalness,
liveness=json1$liveness,
valence=json1$valence,
tempo=json1$tempo,
duration_ms=json1$duration_ms,
time_signature=json1$time_signature,
uri=json1$uri,
analysis_url=json1$analysis_url,stringsAsFactors = F)
return(dados)
}
source('Expansion.R')
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures_own(features_id[x], token=keys)
}, 1:length(features_id))))
View(features)
source('Expansion.R')
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures_own(features_id[x], token=keys)
print(x)
}, 1:length(features_id))))
View(features)
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures_own(features_id[x], token=keys)
#print(x)
}, 1:2)))
View(features)
print(x)
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures_own(features_id[x], token=keys)
print(x)
}, 1:2)))
View(features)
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures_own(features_id[x], token=keys)
}, 1:length(features_id))))
getFeatures_own <- function(spotify_ID,token){
req <- httr::GET(paste0("https://api.spotify.com/v1/audio-features/",spotify_ID), httr::config(token = token))
json1<-data.frame(httr::content(req))
dados=data.frame(id=json1$id,
danceability=json1$danceability,
energy=json1$energy,
key=json1$key,
loudness=json1$loudness,
mode=json1$mode,
speechiness=json1$speechiness,
acousticness=json1$acousticness,
instrumentalness=json1$instrumentalness,
liveness=json1$liveness,
valence=json1$valence,
tempo=json1$tempo,
duration_ms=json1$duration_ms,
time_signature=json1$time_signature,
uri=json1$uri,
analysis_url=json1$analysis_url,stringsAsFactors = F)
Sys.time(0.1)
return(dados)
}
source('Expansion.R')
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures_own(features_id[x], token=keys)
}, 1:length(features_id))))
source('Expansion.R')
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures_own(features_id[x], token=keys)
}, 1:length(features_id))))
source('Expansion.R')
features <- as.data.frame(do.call(rbind, Map(function(x){
getFeatures_own(features_id[x], token=keys)
}, 1:length(features_id))))
View(features)
save.image('Songs+Features.RData')
rm(i)
save.image('Songs+Features.RData')
rm(getAllPlaylistSongs())
rm(getAllPlaylistSongs
rm(getAllPlaylistSongs
)
rm(getAllPlaylistSongs)
rm(getAllSongs)
rm(getFeatures_own)
source('Expansion.R')
save.image('Songs+Features.RData')
